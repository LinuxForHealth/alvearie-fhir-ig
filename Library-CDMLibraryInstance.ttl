@prefix fhir: <http://hl7.org/fhir/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# - resource -------------------------------------------------------------------

<http://ibm.com/fhir/cdm/Library/CDMLibraryInstance> a fhir:Library;
  fhir:nodeRole fhir:treeRoot;
  fhir:Resource.id [ fhir:value "CDMLibraryInstance"];
  fhir:Resource.meta [
     fhir:Meta.profile [
       fhir:value "http://ibm.com/fhir/cdm/StructureDefinition/cdm-library";
       fhir:index 0;
       fhir:link <http://ibm.com/fhir/cdm/StructureDefinition/cdm-library>
     ]
  ];
  fhir:DomainResource.text [
     fhir:Narrative.status [ fhir:value "generated" ];
     fhir:Narrative.div "<div xmlns=\"http://www.w3.org/1999/xhtml\"><h2>Related Artifacts</h2><table class=\"grid\"><tr><td>depends-on</td><td>FHIR Helpers</td><td><code>https://www.hl7.org/fhir/library-fhir-helpers.html</code></td></tr></table><h2>Parameters</h2><table class=\"grid\"><tr><td>measurePeriod</td><td>out</td><td></td><td></td><td>Period</td></tr><tr><td>complianceDisplayName</td><td>out</td><td></td><td></td><td>string</td></tr><tr><td>complianceFrequency</td><td>out</td><td></td><td></td><td>string</td></tr></table><h2>Data Requirements</h2><table class=\"grid\"><tr><td colspan=\"2\"><b>Type</b>: <a href=\"http://hl7.org/fhir/R4/patient.html\">Patient</a></td></tr></table><table class=\"grid\"><tr><td colspan=\"2\"><b>Type</b>: <a href=\"http://hl7.org/fhir/R4/condition.html\">Condition</a></td></tr><tr style=\"background-color: #efefef\"><td>Filter</td><td>Value</td></tr><tr><td>category</td><td>One of these codes: <a href=\"http://terminology.hl7.org/3.1.0/CodeSystem-condition-category.html#encounter-diagnosis\">http://terminology.hl7.org/CodeSystem/condition-category</a> encounter-diagnosis: Encounter Diagnosis</td></tr><tr><td>clinicalStatus</td><td>One of these codes: <a href=\"http://terminology.hl7.org/3.1.0/CodeSystem-condition-clinical.html#active\">http://terminology.hl7.org/CodeSystem/condition-clinical</a> active: Active</td></tr><tr><td>code</td><td>In ValueSet urn:oid:2.16.840.1.113883.3.464.1003.102.12.1011</td></tr></table><table class=\"grid\"><tr><td colspan=\"2\"><b>Type</b>: <a href=\"http://hl7.org/fhir/R4/condition.html\">Condition</a></td></tr><tr style=\"background-color: #efefef\"><td>Filter</td><td>Value</td></tr><tr><td>category</td><td>One of these codes: <a href=\"http://terminology.hl7.org/3.1.0/CodeSystem-condition-category.html#encounter-diagnosis\">http://terminology.hl7.org/CodeSystem/condition-category</a> encounter-diagnosis: Encounter Diagnosis</td></tr><tr><td>clinicalStatus</td><td>One of these codes: <a href=\"http://terminology.hl7.org/3.1.0/CodeSystem-condition-clinical.html#active\">http://terminology.hl7.org/CodeSystem/condition-clinical</a> active: Active</td></tr><tr><td>code</td><td>In ValueSet urn:oid:2.16.840.1.113883.3.464.1003.102.12.1012</td></tr></table><table class=\"grid\"><tr><td colspan=\"2\"><b>Type</b>: <a href=\"http://hl7.org/fhir/R4/encounter.html\">Encounter</a></td></tr><tr style=\"background-color: #efefef\"><td>Filter</td><td>Value</td></tr><tr><td>status</td><td>One of these codes: <a href=\"http://hl7.org/fhir/R4/codesystem-encounter-status.html#finished\">http://hl7.org/fhir/encounter-status</a> finished: Finished</td></tr><tr><td>class</td><td>One of these codes: <a href=\"http://terminology.hl7.org/3.1.0/CodeSystem-v3-ActCode.html#AMB\">http://terminology.hl7.org/CodeSystem/v3-ActCode</a> AMB: ambulatory</td></tr><tr><td>type</td><td>In ValueSet urn:oid:2.16.840.1.113883.3.464.1003.101.12.1061</td></tr></table><table class=\"grid\"><tr><td colspan=\"2\"><b>Type</b>: <a href=\"http://hl7.org/fhir/R4/diagnosticreport.html\">DiagnosticReport</a></td></tr><tr style=\"background-color: #efefef\"><td>Filter</td><td>Value</td></tr><tr><td>diagnosis</td><td>In ValueSet urn:oid:2.16.840.1.113883.3.464.1003.198.12.1012</td></tr></table><table class=\"grid\"><tr><td colspan=\"2\"><b>Type</b>: <a href=\"http://hl7.org/fhir/R4/medication.html\">Medication</a></td></tr><tr style=\"background-color: #efefef\"><td>Filter</td><td>Value</td></tr><tr><td>code</td><td>In ValueSet urn:oid:2.16.840.1.113883.3.464.1003.196.12.1001</td></tr></table><table class=\"grid\"><tr><td colspan=\"2\"><b>Type</b>: <a href=\"http://hl7.org/fhir/R4/medicationrequest.html\">MedicationRequest</a></td></tr><tr style=\"background-color: #efefef\"><td>Filter</td><td>Value</td></tr><tr><td>status</td><td>One of these codes: <a href=\"http://hl7.org/fhir/R4/codesystem-medicationrequest-status.html#active\">http://hl7.org/fhir/CodeSystem/medicationrequest-status</a> active: Active</td></tr><tr><td>medication.code</td><td>In ValueSet urn:oid:2.16.840.1.113883.3.464.1003.196.12.1001</td></tr></table><h2>Contents</h2><p>CMS146 Example CQL: <code>No Content</code> (<code>text/cql</code>)</p></div>"
  ];
  fhir:Library.url [ fhir:value "http://ibm.com/fhir/cdm/Library/CDMLibraryInstance"];
  fhir:Library.identifier [
     fhir:index 0;
     fhir:Identifier.use [ fhir:value "official" ];
     fhir:Identifier.type [
       fhir:CodeableConcept.coding [
         fhir:index 0;
         fhir:Coding.system [ fhir:value "http://ibm.com/fhir/cdm/CodeSystem/identifier-type" ];
         fhir:Coding.code [ fhir:value "SSRI" ]
       ]
     ];
     fhir:Identifier.system [ fhir:value "http://ibm.com/fhir/cdm/cql-library" ];
     fhir:Identifier.value [ fhir:value "sample-library-CMS146" ];
     fhir:Identifier.assigner [
       fhir:Reference.display [ fhir:value "HDC" ]
     ]
  ];
  fhir:Library.version [ fhir:value "6.1.1"];
  fhir:Library.name [ fhir:value "CMS146_Sample_Cql_Logic_Library"];
  fhir:Library.title [ fhir:value "Sample CQL Logic Library for CMS146"];
  fhir:Library.status [ fhir:value "draft"];
  fhir:Library.type [
     fhir:CodeableConcept.coding [
       fhir:index 0;
       fhir:Coding.system [ fhir:value "http://terminology.hl7.org/CodeSystem/library-type" ];
       fhir:Coding.code [ fhir:value "logic-library" ]
     ]
  ];
  fhir:Library.date [ fhir:value "2015-07-22"^^xsd:date];
  fhir:Library.publisher [ fhir:value "Alvearie Team"];
  fhir:Library.description [ fhir:value "Sample CMS146 library for sample measures used to illustrate Alvearie IG usage"];
  fhir:Library.jurisdiction [
     fhir:index 0;
     fhir:CodeableConcept.coding [
       fhir:index 0;
       fhir:Coding.system [ fhir:value "urn:iso:std:iso:3166" ];
       fhir:Coding.code [ fhir:value "US" ]
     ]
  ];
  fhir:Library.relatedArtifact [
     fhir:index 0;
     fhir:RelatedArtifact.type [ fhir:value "depends-on" ];
     fhir:RelatedArtifact.display [ fhir:value "FHIR Helpers" ];
     fhir:RelatedArtifact.resource [
       fhir:value "https://www.hl7.org/fhir/library-fhir-helpers.html";
       fhir:link <https://www.hl7.org/fhir/library-fhir-helpers.html>
     ]
  ];
  fhir:Library.parameter [
     fhir:index 0;
     fhir:ParameterDefinition.name [ fhir:value "measurePeriod" ];
     fhir:ParameterDefinition.use [ fhir:value "out" ];
     fhir:ParameterDefinition.type [ fhir:value "Period" ]
  ], [
     fhir:index 1;
     fhir:Element.extension [
       fhir:index 0;
       fhir:Extension.url [ fhir:value "http://ibm.com/fhir/cdm/StructureDefinition/default-value" ];
       fhir:Extension.valueString [ fhir:value "Pharyngitis Testing" ]
     ];
     fhir:ParameterDefinition.name [ fhir:value "complianceDisplayName" ];
     fhir:ParameterDefinition.use [ fhir:value "out" ];
     fhir:ParameterDefinition.type [ fhir:value "string" ]
  ], [
     fhir:index 2;
     fhir:Element.extension [
       fhir:index 0;
       fhir:Extension.url [ fhir:value "http://ibm.com/fhir/cdm/StructureDefinition/default-value" ];
       fhir:Extension.valueString [ fhir:value "Once yearly" ]
     ];
     fhir:ParameterDefinition.name [ fhir:value "complianceFrequency" ];
     fhir:ParameterDefinition.use [ fhir:value "out" ];
     fhir:ParameterDefinition.type [ fhir:value "string" ]
  ];
  fhir:Library.dataRequirement [
     fhir:index 0;
     fhir:DataRequirement.type [ fhir:value "Patient" ]
  ], [
     fhir:index 1;
     fhir:DataRequirement.type [ fhir:value "Condition" ];
     fhir:DataRequirement.codeFilter [
       fhir:index 0;
       fhir:DataRequirement.codeFilter.path [ fhir:value "category" ];
       fhir:DataRequirement.codeFilter.code [
         fhir:index 0;
         fhir:Coding.system [ fhir:value "http://terminology.hl7.org/CodeSystem/condition-category" ];
         fhir:Coding.code [ fhir:value "encounter-diagnosis" ]
       ]
     ], [
       fhir:index 1;
       fhir:DataRequirement.codeFilter.path [ fhir:value "clinicalStatus" ];
       fhir:DataRequirement.codeFilter.code [
         fhir:index 0;
         fhir:Coding.system [ fhir:value "http://terminology.hl7.org/CodeSystem/condition-clinical" ];
         fhir:Coding.code [ fhir:value "active" ]
       ]
     ], [
       fhir:index 2;
       fhir:DataRequirement.codeFilter.path [ fhir:value "code" ];
       fhir:DataRequirement.codeFilter.valueSet [ fhir:value "urn:oid:2.16.840.1.113883.3.464.1003.102.12.1011" ]
     ]
  ], [
     fhir:index 2;
     fhir:DataRequirement.type [ fhir:value "Condition" ];
     fhir:DataRequirement.codeFilter [
       fhir:index 0;
       fhir:DataRequirement.codeFilter.path [ fhir:value "category" ];
       fhir:DataRequirement.codeFilter.code [
         fhir:index 0;
         fhir:Coding.system [ fhir:value "http://terminology.hl7.org/CodeSystem/condition-category" ];
         fhir:Coding.code [ fhir:value "encounter-diagnosis" ]
       ]
     ], [
       fhir:index 1;
       fhir:DataRequirement.codeFilter.path [ fhir:value "clinicalStatus" ];
       fhir:DataRequirement.codeFilter.code [
         fhir:index 0;
         fhir:Coding.system [ fhir:value "http://terminology.hl7.org/CodeSystem/condition-clinical" ];
         fhir:Coding.code [ fhir:value "active" ]
       ]
     ], [
       fhir:index 2;
       fhir:DataRequirement.codeFilter.path [ fhir:value "code" ];
       fhir:DataRequirement.codeFilter.valueSet [ fhir:value "urn:oid:2.16.840.1.113883.3.464.1003.102.12.1012" ]
     ]
  ], [
     fhir:index 3;
     fhir:DataRequirement.type [ fhir:value "Encounter" ];
     fhir:DataRequirement.codeFilter [
       fhir:index 0;
       fhir:DataRequirement.codeFilter.path [ fhir:value "status" ];
       fhir:DataRequirement.codeFilter.code [
         fhir:index 0;
         fhir:Coding.system [ fhir:value "http://hl7.org/fhir/encounter-status" ];
         fhir:Coding.code [ fhir:value "finished" ]
       ]
     ], [
       fhir:index 1;
       fhir:DataRequirement.codeFilter.path [ fhir:value "class" ];
       fhir:DataRequirement.codeFilter.code [
         fhir:index 0;
         fhir:Coding.system [ fhir:value "http://terminology.hl7.org/CodeSystem/v3-ActCode" ];
         fhir:Coding.code [ fhir:value "AMB" ]
       ]
     ], [
       fhir:index 2;
       fhir:DataRequirement.codeFilter.path [ fhir:value "type" ];
       fhir:DataRequirement.codeFilter.valueSet [ fhir:value "urn:oid:2.16.840.1.113883.3.464.1003.101.12.1061" ]
     ]
  ], [
     fhir:index 4;
     fhir:DataRequirement.type [ fhir:value "DiagnosticReport" ];
     fhir:DataRequirement.codeFilter [
       fhir:index 0;
       fhir:DataRequirement.codeFilter.path [ fhir:value "diagnosis" ];
       fhir:DataRequirement.codeFilter.valueSet [ fhir:value "urn:oid:2.16.840.1.113883.3.464.1003.198.12.1012" ]
     ]
  ], [
     fhir:index 5;
     fhir:DataRequirement.type [ fhir:value "Medication" ];
     fhir:DataRequirement.codeFilter [
       fhir:index 0;
       fhir:DataRequirement.codeFilter.path [ fhir:value "code" ];
       fhir:DataRequirement.codeFilter.valueSet [ fhir:value "urn:oid:2.16.840.1.113883.3.464.1003.196.12.1001" ]
     ]
  ], [
     fhir:index 6;
     fhir:DataRequirement.type [ fhir:value "MedicationRequest" ];
     fhir:DataRequirement.codeFilter [
       fhir:index 0;
       fhir:DataRequirement.codeFilter.path [ fhir:value "status" ];
       fhir:DataRequirement.codeFilter.code [
         fhir:index 0;
         fhir:Coding.system [ fhir:value "http://hl7.org/fhir/CodeSystem/medicationrequest-status" ];
         fhir:Coding.code [ fhir:value "active" ]
       ]
     ], [
       fhir:index 1;
       fhir:DataRequirement.codeFilter.path [ fhir:value "medication.code" ];
       fhir:DataRequirement.codeFilter.valueSet [ fhir:value "urn:oid:2.16.840.1.113883.3.464.1003.196.12.1001" ]
     ]
  ];
  fhir:Library.content [
     fhir:index 0;
     fhir:Attachment.contentType [ fhir:value "text/cql" ];
     fhir:Attachment.title [ fhir:value "CMS146 Example CQL" ]
  ] .

# - ontology header ------------------------------------------------------------

<http://ibm.com/fhir/cdm/Library/CDMLibraryInstance.ttl> a owl:Ontology;
  owl:imports fhir:fhir.ttl .

# -------------------------------------------------------------------------------------

